;********************************************************************************
;                       跑马灯试验	       										*
;																				*
;       开机8个灯循环点亮。                                                     *
;       硬件连接：p2口8路指示灯，												*
;       连接方法： JP11（P2）和J12(LED灯) 用8PIN排线连接起来 					*
;********************************************************************************

 
	org 0000h			    ;程序从0000开始运行
	jmp init		       ;跳到主程序
init:  mov ie,#10000001b	;中断使能
	   mov ip,#00000001b	    ;中断优先
       mov tcon,#0000000b	   ;中断为电平触发
main:				       ;主程序循环点亮
	mov	p2,#00h	           	;全亮
	lcall	delay	        ;延时一段时间
	mov	a,#0feh		;每次只亮一个灯。
loop:	mov	p2,a		;输出到p1
	lcall	delay		;	延时
	rl	a		;循环左移。
	ajmp	loop		; 跳转main继续循环

delay: mov r5,#20		;延时子程序1闪烁灯调用
	d1:mov r6,#20
	d2: mov r7,#250
	djnz r7,$
	djnz r6,d2
	djnz r5,d1
	ret
	end
