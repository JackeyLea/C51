;********************************************************************************
;中断控制的P2.0小灯。采用11.0592/12MHZ晶振。                                    *
;连接方法： JP11（P2）和J12(LED灯) 用8PIN排线连接起来   																			*
;********************************************************************************
;         																		*
;********************************************************************************
	ORG	0000h
	AJMP	main
	ORG	000bh
	AJMP	int_timer
	ORG	0030h
main:	MOV	tmod,#01h		;设置定时器工作方式寄存器。
	MOV	th0,#high(65536-10000)	;
	MOV	tl0,#low(65536-10000)	;设10MS初始值。
	MOV	ie,#82h			;设置中断允许寄存器
	MOV	30h,#10			;
	MOV	31h,#6			;30H和31H是两个软件计数器。
	SETB	tr0			;启动定时
	AJMP	$			;原地踏步

int_timer:				;定时器0中断服务程序。
	MOV	th0,#high(65536-10000)	;
	MOV	tl0,#low(65536-10000)	;重设10MS定时。
	DJNZ	30h,l1			;
	MOV	30h,#10			;
	DJNZ	31h,l1			;
	MOV	31h,#6			;软件计数
	CPL	  p2.0			;10*6*10MS=600MS时间到，P1.1取反
l1:	RETI				;中断返回
	END
